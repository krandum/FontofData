<p id="notice"><%= notice %></p>

<p>
<% if user_signed_in? %>
  Welcome, <%= current_user.username %>! You are a part of the <%= current_user.faction.faction_name %> faction.<br>
  <br>
  Change factions:
  <br>
  <% unless current_user.faction_id == 2 %>
  <%= link_to Faction.find( 2 ).faction_name, registration_faction_path(faction_id: 2), method: :patch %>
  <br>
  <% end %>
  <% unless current_user.faction_id == 3 %>
  <%= link_to Faction.find( 3 ).faction_name, registration_faction_path(faction_id: 3), method: :patch %>
  <br>
  <% end %>
  <% unless current_user.faction_id == 4 %>
  <%= link_to Faction.find( 4 ).faction_name, registration_faction_path(faction_id: 4), method: :patch %>
  <br>
  <% end %>
  <%= link_to 'Sign Out', destroy_user_session_path, method: :delete %>
  |
  <%= link_to 'Manage Account', edit_user_registration_path %>
<% else %>
    <%= link_to 'Sign In', new_user_session_path %>
    |
    <%= link_to 'Sign Up', new_user_registration_path %>
<% end %>
</p>

<h1>Listing Data Nodes</h1>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Faction</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @data_nodes.each do |data_node| %>
      <tr>
        <td><%= data_node.value %></td>
        <td><%= data_node.faction_id %></td>
        <td><%= link_to 'Show', data_node %></td>
        <td><%= link_to 'Edit', edit_data_node_path(data_node) %></td>
        <td><%= link_to 'Destroy', data_node, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Data node', new_data_node_path %>
